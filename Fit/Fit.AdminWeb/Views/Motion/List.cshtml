@{
  ViewBag.Title = "Motion | List";
  ViewBag.Name = "动作管理";
}
@model Fit.DTO.MotionDTO[]

<div class="row wrapper border-bottom white-bg  page-heading">
  <div class="col-sm-4">
    <h2>动作管理</h2>
    <ol class="breadcrumb">
      <li>
        <span>健身管理</span>
      </li>
      <li class="active">
        <strong>动作管理</strong>
      </li>
    </ol>
  </div>
  <div class="col-sm-8">
    <div class="title-action">
      <a href="~/Motion/Add" class="btn btn-primary">添加</a>
    </div>
  </div>
</div>
<div class="wrapper wrapper-content animated fadeInRight">
  <div class="row">
    <div class="col-lg-12">
      <div class="ibox float-e-margins">
        <div class="ibox-content">
          <table class="footable table table-stripped toggle-arrow-tiny" data-page-size="8">
            <thead>
              <tr>
                <th>名称</th>
                <th>肌肉</th>
                <th>肌群</th>
                <th>操作</th>
              </tr>
            </thead>
            <tbody>
              @foreach (var item in Model)
              {
                <tr>
                  <td>@item.Name</td>
                  <td>@item.MuscleName</td>
                  <td>@item.MuscleGroupName</td>
                  <td>
                    <a href="~/Motion/Edit/@item.Id">
                      <i class="fa fa-edit"></i>
                    </a>
                    <span>&nbsp;</span>
                    <a href="javascript:void(0);" onclick='onDelete(@item.Id);return false'>
                      <i class="fa fa-times"></i>
                    </a>
                  </td>
                </tr>
              }
            </tbody>
            <tfoot>
              <tr>
                <td colspan="10" class="footable-visible">
                  @{
                    Fit.Common.PageHelper.TotalCount = ViewBag.TotalCount;
                    Fit.Common.PageHelper.CurrentPage = ViewBag.PageIndex;
                    Fit.Common.PageHelper.HrefStr = "/Motion/List?pageIndex=";
                  }
                  @Html.Raw(Fit.Common.PageHelper.GetHtmlPager())
                  @{Fit.Common.PageHelper.Reset();}
                </td>
              </tr>
            </tfoot>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>

@section FooterScript{
  <script>
    $(function () {
      $('.footable').footable();
    });
    function onDelete(id) {
      if (confirm("确定要删除吗？")) {
        deleteById(id);
      }
    };
    function deleteById(id) {
      $.ajax({
        url: "/Motion/Delete/" + id,
        type: "post",
        success: function (res) {
          if (res.status == "ok") {
            location.reload();
          } else {
            alert(res.msg);
          }
        }
      });
    };
  </script>
}


