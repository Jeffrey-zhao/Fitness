@{
  ViewBag.Title = "Home Page";
  ViewBag.Name = "管理员管理";
}
@model Fit.DTO.RBAC.AdminUserDTO[]

<div class="row wrapper border-bottom white-bg  page-heading">
  <div class="col-sm-4">
    <h4>管理员管理</h4>
  </div>
  <div class="col-sm-8">
    <div>
      <a href="~/AdminUser/Add" class="btn btn-primary">添加</a>
    </div>
  </div>
</div>
<div class="wrapper wrapper-content animated fadeInRight">
  <div class="row">
    <div class="col-lg-12">
      <div class="ibox float-e-margins">
        <div class="ibox-content">
          <table class="footable table table-stripped toggle-arrow-tiny" data-page-size="8">
            <thead>
              <tr>
                <th>名称</th>
                <th>手机号</th>
                <th>邮箱</th>
                <th>操作</th>
              </tr>
            </thead>
            <tbody>
              @foreach (var adminUser in Model)
              {
                <tr>
                  <td>@adminUser.Name</td>
                  <td>@adminUser.PhoneNum</td>
                  <td>@adminUser.Email</td>
                  <td>
                    <a href="~/AdminUser/Edit/@adminUser.ID">
                      <i class="fa fa-edit"></i>
                    </a>
                    <span>&nbsp;</span>
                    <a href="javascript:void(0);" onclick='onDelete(@adminUser.ID);return false'>
                      <i class="fa fa-times"></i>
                    </a>
                  </td>
                </tr>
              }
            </tbody>
            <tfoot>
              <tr>
                <td colspan="10" class="footable-visible">
                  @{
                    Fit.Common.PageHelper.TotalCount = ViewBag.TotalCount;
                    Fit.Common.PageHelper.CurrentPage = ViewBag.PageIndex;
                  }
                  @Html.Raw(Fit.Common.PageHelper.GetHtmlPager())
                  @{Fit.Common.PageHelper.Reset();}
                </td>
              </tr>
            </tfoot>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>

@section FooterScript{
  <script>
    $(function () {
      $('.footable').footable();
    });
    function onDelete(id) {
      if (confirm("确定要删除吗？")) {
        deleteById(id);
      }
    };
    function deleteById(id) {
      $.ajax({
        url: "/AdminUser/Delete/" + id,
        type: "post",
        success: function (res) {
          if (res.status == "ok") {
            location.reload();
          } else {
            alert(res.msg);
          }
        }
      });
    };
  </script>
}


